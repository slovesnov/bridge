changes 5.2
development of version 5.2 began on November 7, 2020 and ended on December 14??, 2021

[interface part]
//begin versions.txt
application is adapted for windows 10 because it is impossible to write to the files where the program is installed
due to algorithm changes, the application will only work on 64-bit windows
added mathematical expectation calculator for the value of contracts for the option "solve all the deals"
option "solve all deals" has been added for bridge. Pair of players with unknown cards can be chosen, cards of players can be fixed. You can do a search when the pair has at least one card left
option "solve all deals" was expanded for preferans, now you can do a search when there is at least one card left for defenders
optimal moves panel added, which you can click on to make a several of them
added score calculator for preference
added support for decks and arrows in vector graphics format (svg files). Added raster/vector decks, raster/vector arrows
option to stop calculations while they are not finished has been added
added complete descriptions of bridge and preferans algorithms in Russian and English 
you can read about all the changes in the new version on the website in the version history
//end versions.txt
the source code is published on github
added menu problem/open from library
added menu addons/reset settings
all moves evaluation function is accelerated for bridge since it has become multitasking, it now also uses a reduced search interval
export of calculation results to csv file was added for the option "solve all deals", also export of all deals with results was added
when new parameters are added to the configuration file, the old information is now read instead of a full reset, as before. In particular, when installing a later version over the old one, the old settings will be read and the rest will be set by default. The order of the lines in the file when reading is no longer important.
if there is no id in the language file, the number of previous id is taken and incremented by one
when reading a language file other than English and Russian, if the id is not found, then the corresponding string from the English file is used.
all bridgeX.css files are removed, and only one unchangeable bridge.css file is left
all settings affecting the css style are now stored in the config file.
aslov self-developed library is used, sources are published on github
picture of the first deck has been changed, the diamond became smoother (the picture is taken from the gambler)
when exiting from the application in case of incomplete calculation, the correct stopping of the search is called
because the deck can now be scaled, support for large monitors was added
set big deck by default for big monitors
changed the default font size depending on scaling
deleted the image of the cardback, now uses a scalable drawing
fixed bug, now it is impossible to switch tasks in the task selection panel during calculations.
fixed bug, now you can not call some menu items during calculations, for example, to open the task
fixed bug when saving/loading tasks when more than 50 moves are done.
bug fixed if a task was loaded without a contract, and then the language changed, the contract remains unset.
fixed a bug when calling the calculator of points for the bridge with the current preferans game, now there is no option misere
fixed bug in drawing of bottom, rounded table corner
fixed bug at increase / decrease of font size
fixed bug in rendering best moves panel with large deck and small font
tooltips make as status bar which allow avoid problems with long strings
fixed bug with dinamical adding/removing of analisys/last trick
Fixed a bug when selecting a background image that contains transparent pixels
problem saving to html file has been changed, if a file contains only one task. Now the number of the problem is not specified in the file, since it is not needed
reset language file, if path indicated in configuration file is wrong. Now when you move/rename a folder with the program, it does not hang
"Check for a new version" menu has been removed, as it is not needed
the application has been adapted to the gcc 10.3.0 compiler and gtk 3.24.30. In the new version of gtk, some bugs of the previous version of the gtk library are vanished
all static functions of Base class are made to global functions

[logical part]
the bridge problem solver has been completely rewritten
now you can solve several tasks in one process
since everything is solved in one process, synchronization of the bridge problems has been simplified
preliminary calculation of moves was added
added cutoffs of lower 4 layers in bridge and 3 layers in preferans, earlier it was 3 and 2 accordingly
32-bit numbers are now used as suit codes in bridge, they are used to find moves and also for hash table index. Previously, for suit codes used doubly linked lists, as well as parallel bit codes of suits, which were used to find the hash table index.
separate algorithms are added for games with trump, NT games and misere games for preference
for each type of algorithm the parameters for statistical ordering of moves are adjusted. Now the algorithm does not require a check on the type of game with or without trump, or misere for preference
in the internal representation trump, if there is one, is always zero for bridge and preference. Now only two card comparison tables are required instead of five, one for games with trump, the other for games without trump, including misere games
the application became 64-bit. As each object of the Bridge class requires about 280 MB of memory, if a computer has 6 or more cores, the 32-bit application would not have enough memory
the bridgeConsole project is no longer needed (it was removed)
the preferans task solver has been speeded up, read more details can be found in the description of the <a href="?bridge_logic52">logical part</a>
you can read more about all the changes in the new version in the <a href="?bridge_logic52">logical part</a>

разработка версии 5.2 началась 7 ноября 2020 закончилась 14?? декабря 2021

[интерфейсная часть]
//begin versions.txt
приложение адаптировано под windows 10 так как невозможно писать в файлы куда программа установлена
в связи с изменением алгоритма приложение будет работать только под 64-битный windows
добавлен калькулятор математического ожидания стоимости контрактов для опции "решить все расклады"
опция "решить все расклады" добавлена для бриджа. Пару игроков с неизвестными картами можно выбирать, карты у игроков можно фиксировать. Можно делать поиск, когда у пары осталась хотя бы одна карта
опция "решить все расклады" расширена для преферанса, теперь можно делать поиск, когда осталась хотя бы одна карта у вистующих/ловцов мизера
добавлена панель оптимальных ходов, на которые можно нажать, чтобы сделать несколько из них
добавлен калькулятор очков для преферанса
добавлена поддержка колод и стрелок в формате векторной графики (svg файлы). Добавлены растровые/векторные колоды, растровые/векторые стрелки
добавлена опция остановки расчетов, пока они не закончены
добавлено полное описание бриджевого и преферансного алгоритмов на русском и английском языках 
обо всех изменениях в новой версии можно прочитать на сайте программы в истории версий
//end versions.txt
исходный код программы опубликован на github
добавлено меню задача/открыть из библиотеки
добавлено меню дополнительно/сбросить настройки
функция оценки всех ходов ускорена для бриджа, так как стала многозадачной, для нее также теперь используется сокращенный интервал поиска
для опции "решить все расклады" добавился экспорт результатов расчетов в csv файл, также добавлен экспорт всех сдач с результатами
при добавлении новых параметров в конфигурационный файл, теперь считывается старая информация, а не происходит полный сброс настроек, как раньше. В частности при установке более поздней версии поверх старой, будут считываться старые настройки, остальные будут установлены по умолчанию. Порядок строк в файле при чтении теперь не важен.
если в языковом файле если не указан id, то берется номер предыдущего id и увеличивается на единицу
при считывании файла языка отличного от английского и русского, если идентификатор не найден, то используется соответствующая строка из файла английского языка
удалены все вспомогательные файлы bridgeX.css остался только один неизменяемый файл bridge.css
все настройки влияющие на css стиль хранятся теперь в конфиге
используется библиотека собственной разработки aslov, исходники которой опубликованы на github
заменено изображение первой колоды, бубна стала более гладкой (изображение взято в гамблера)
при выходе из приложения при неоконченном расчете, вызывается корректная остановка перебора
так как колода теперь может быть масштабируемой, добавлена поддержка больших мониторов
сделана установка большой колоды по умолчанию для больших мониторов
сделана установка размера шрифта зависящего от масштабирования
удалено изображение рубашки карты, теперь используется масштабируемое рисование
исправлен баг, теперь нельзя переключать задачи в панели выбора задачи во время расчетов
исправлен баг, теперь нельзя вызвать некоторые пункты меню во время расчетов, например, открыть задачу
исправлен баг при сохранении/загрузки задач, когда сделано больше 50 ходов
исправлен баг если была загружена задача без контракта, а потом менялся язык, то контракт остается не установленным
исправлен баг при вызове калькулятора очков для бриджа при текущей игре преферанс, теперь нет опции мизер
исправлен баг при отрисовке нижнего, угла скругленного стола
исправлен баг при увеличении/уменьшении размера шрифта
исправлен баг при отрисовке панели лучших ходов если большая колода и маленький шрифт
подсказки сделаны в виде строки состояния что позволяет избежать проблем с длинными строками
исправлен баг при динамическом добавлении/удалении окна анализа/последней взятки
исправлен баг при выборе рисунка фона, содержащего прозрачные пиксели
изменено сохранение задачи в html файл, когда файл содержит всего одну задачу. Теперь номер задачи в файле не указывается так как он не нужен
сброс языкового файла, если путь указанный в конфигурационном файле неправильный. Теперь при переносе/переименовании папки с программой она не зависает
удалено меню "проверка новой версии", за ненадобностью
приложение адаптировано под компилятор gcc 10.3.0 и gtk 3.24.30. В новой версии gtk пропали некоторые баги предыдущей версии библиотеки gtk
все статические функции класса Base вынесены в глобальные функции

[логическая часть]
решатель задач по бриджу переписан заново
можно решать несколько бриджевых задач в одном процессе
так как все стало работать в одном процессе, то упрощена синхронизация потоков для бриджевых задач
добавился предварительный расчет ходов
добавились отсечения нижних 4х слоев в бридже и 3х в преферансе, раньше было 3 и 2 соответсвенно
в качестве кодов мастей в бридже теперь использется 32х битное число, по кодам находятся ходы и они же используются для индекса хеш-таблицы. Раньше для кодов мастей использовалить двусвязные списки, а также параллельно битовые коды мастей, по которым находился индекс хеш-таблицы
добавлены отдельные алгоритмы для игр с козырем, бескозырных игр и мизерных игр для преферанса. Теперь в алгоритме не требуется проверка на тип игры с козырем или без козыря, или мизер для преферанса
для каждого типа алгорима подбираются параметры для статистического упорядочивания ходов
во внутреннем представлении козырь, если он есть, всегда равен нулю для бриджа и преферанса. Теперь требуется только две таблицы сравнения карт, вместо пяти, одна для игр с козырем, другая для игр без козыря в том числе и для мизерных игр
приложение стало 64х битным. Так как каждый объект класса Bridge требует около 280мб памяти, то если на компьютере 6 и больше ядер, то 32х битному приложению не хватало бы памяти
теперь не нужен проект bridgeConsole (он удален)
ускорен решатель задач по преферансу. Описание в <a href="?bridge_logic52">логической части</a>
более подробно обо всех изменениях в новой версии можно прочитать в <a href="?bridge_logic52">логической части</a>

changes 5.103beta
#define printloginfo for non debug mode

changes 5.102beta
[fixed bugs]
fixed macros definition two times in base.h file #define INDEX_OF(a,id) indexOf(a,SIZE(a),id)

[исправленные баги]
исправлено определение макроса в файле base.h повторяется дважды #define INDEX_OF(a,id) indexOf(a,SIZE(a),id)

changes 5.101beta
[fixed bugs]
fixed bug when store/load problems when more than 50 turns
fixed bug for bridge score calculator when current game is preferans, there is no option mizer now
[interface] (inno changes done)
change image for first deck, diamond became smooth (image take from gambler)

[исправленные баги]
исправлен баг при сохранении/загрузки задач, когда сделано больше 50 ходов
исправлен баг при вызове калькулятора очков для брижда при текущей игре преферанс, теперь нет опции мизер
[интерфейс] (изменение inno сделаны)
заменено изображение первой колоды, бубна стала более гладкой (изображение взято в гамблера)

changes 5.1
[base changes]
table rotation by 90 degrees for preferans game (selection place of abcent player) if click on absent cards or "addons" menu
option "solve for all declarers and trumps" for preferans now solves for all first moves, players and game type. First move was fixed in earlier versions
code for preferans is changes and became much faster, especially option "solve all opponent deals"
[interface part]
fixed bug when option "solve for all declarers and trumps" for bridge was selected and dialog was closed and open again (old version outputs information to new dialog)
fixed bug when file was opened by association from another directory. It wasn't possible to run console apptication
fixed bug when save problem to html file
fixed bug when setup application to path with utf8 characters
fixed bug with click/tooltip when cards was over north/south players and number of tricks of them
fixed bug with tooltips with small decks and arrows and for preferans game. Tooltips now doesn't extend window
fixed bug for menu "clear deal". Last trick window now is cleared
fixed bug number of trick not always cleared when problem was edited
[logical part]
prefeans code is rewritten. Now it's possible to solve many problems in one process
hash options for preferans is improved, now program uses codes of suits, like in bridge solver, only for recent cards. It's possible to not clear hash if trump is still the same
option "solve all opponent deals" for preferans was strictly accelerated
all source files were proceded using eclipse formatter. Source code became more readable
thread synchronization including console application is fully completed
preferans and bridge solvers are moved to base project
for BridgePosition class all functions/variables now starts from small letters, all constants became static class members and uppercased
read more about logical part changes (only in russian) <a href="?bridge_logic51,russian">here</a>

[основные изменения]
добавлена опция поворота стола на 90 градусов для преферанса (выбор места отсутствующего игрока) при клике на отсутствующих картах и в меню "дополнительно"
расширена опция "решить для всех игроков и козырей" для преферанса, теперь выводится информация для любого первого хода, игрока и типа игры, раньше первый ход был фиксирован
код преферансного решателя переписан и стал намного быстрее, особенно опция "решить все расклады противников"
[интерфейсная часть]
исправлен баг когда выбиралась опция "решить для всех игроков и козырей" для бриджа и потом диалог закрывался и открывался новый (информация от старого расчета выводилась в новый диалог при завершении старого расчета)
исправлен баг когда файл открывался по ассоциации из другого каталога, то невозможно было запускать консольное приложение
исправлен баг при сохранении в html файл
исправлен баг при установке приложения в каталог с русскими буквами
исправлен баг при клике/подсказке когда карты были поверх надписей Север/Юг и числа их взяток
исправлен баг с подсказками, при маленьких колодах и стрелках и если тип игры преферанс. Подсказки теперь не расширяют окно
исправлен баг при вызове меню "очистить сдачу" не очищалось окно последней взятки
исправлен баг число взяток не всегда обнулялось при редактировании сдачи
[логическая часть]
переписан код преферансного решателя, теперь можно решать несколько задач в одном процессе
улучшено хеширование в преферансе, теперь используются коды мастей, как в бридже, только по картам оставшимся на руках. Код переписан так, что теперь можно не очищать хеш если остался тот же козырь
очень сильно ускорена опция "решить все расклады противников"
все файлы кода отредактированы с помощью formatter'а eclipse, в связи с чем код стал более читаемым
полностью доделана синхронизация потоков, в том числе и для консольного приложения
преферанс и бридж перенесены из консольного проекта в основной
код бриджа немного изменен все функции/переменные стали начинаться с маленькой буквы, константы стали статическим членами класса, их имена в верхнем регистре
об изменениях логической части решателя более подробно можно прочитать <a href="?bridge_logic51">здесь</a> 


changes 5.02
code adopted for gcc 7.3.0 and gtk 3.22.28
remove 'zip' folder now use 'minizip' package 
add vector graphic logo on about dialog
fixed bug with disable menu language
change installator extension to exe 

код адаптирован под gcc 7.3.0 и gtk 3.22.28
удален каталог zip теперь используется пакет minizip
логотип сделан в виде векторной графики
исправлен баг с деактивацией текущего языка  
инсталлятор изменен на exe файл  

added suits.svg
removed "aboutBig.png"


changes 5.01
add new feature for preferans "solve all opponent deals"
fixed bug with edit problem list option when first problem has type preferans
accelerate solution of preferans problems
clean up and reviewed PrefPosition.h & PrefPosition.cpp files
solver code now is shared for bridge and bridgeConsole projects

добавлена новая опция для преферанса "решить все расклады противников"
исправлен баг в редакторе списка задач, когда первая задача является задачей по преферансу
ускорено решение преферансных задач
очищены и пересмотрены файлы PrefPosition.h & PrefPosition.cpp
код решателя сделан общим для проектов bridge и bridgeConsole

modified files in distributive
bridge.exe 
bridgeConsole.exe
lng/*.lng
css/bridge.css

CHANGES 5.0
=========== BEGIN before release ===================
file search println, printinfo remove
search todo
format code by eclipse source format
define FINAL_RELEASE NDEBUG

call from console
bridge.exe 1.txt - 1.txt not exists
bridge.exe 2.txt -no tasks
install to russian named dictionary

click all menu items
=========== END before release =====================

remove
Type: files; Name: "{app}\bin\images\fill24.png"
Type: files; Name: "{app}\bin\images\stop48.png"
Type: files; Name: "{app}\bin\images\html16.png"
Type: files; Name: "{app}\bin\images\flag_unknown.gif"
Type: files; Name: "{app}\bin\images\saveadd16.png"

============== BEGIN UPDATE ===========================================
run Frame::resetCssFiles() before create installer

upload sources
upload program (test http://sourceforge.net/projects/bridge-studio/files/latest/download)
upload sf.net/bridge/version.txt
upload bridge-studio.sf.net/version.txt
make screenshots
test

============== END UPDATE =============================================

============== BEGIN COMMON ===========================================
all functions which have std::string arguments use utf8 encoding
all class members of std::string type use utf8 encoding
all class members which are path to file use full path to file
================ END COMMON ===========================================

================ BEGIN HELPER CODES ===================================
w = gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
gtk_container_add(GTK_CONTAINER(w), w1);
gtk_box_pack_start (GTK_BOX (w), w1, TRUE, TRUE, 0);

gtk_widget_set_hexpand(m_button[i],TRUE);//instead of glue

//another type of stretch or glue
gtk_widget_set_halign (w1,GTK_ALIGN_CENTER);
gtk_box_pack_start (GTK_BOX(w), w1, TRUE, TRUE, 0);


-- widget path to string --
println("%s",gtk_widget_path_to_string (gtk_widget_get_path(w)) );

GtkWidgetPath *path=gtk_widget_get_path(widget);
println("%s",gtk_widget_path_to_string (path) );

GtkWidget*w=gtk_window_get_focus (GTK_WINDOW(getWidget()));
println("w=%x",w);
GtkWidgetPath *path=gtk_widget_get_path(w);
int i=gtk_widget_path_length(path);
println("len%d %s",i,gtk_widget_path_to_string (path) );

g = gtk_grid_new ();
gtk_grid_set_column_spacing(GTK_GRID(g),margin);
gtk_grid_set_row_spacing(GTK_GRID(g), margin );
gtk_grid_attach (GTK_GRID (g), gtk_label_new(getString(LID[i])), 0, i,1,1);


Photoshop remove red level
menu image/ adjustments/levels. Select "red" channel in combobox
and move slider


================ END HELPER CODES =====================================

львиндоус	

